@keyframes smoothExpand { 0% { width: 50%; height: 400px; } 50% { width: 70%; height: 600px; } 100% { width: 82%; height: auto; min-height: 1000px; } }
@keyframes smoothContract { 0% { width: 50%; } 50% { width: 30%; } 100% { width: 18%; } }
@keyframes smoothRevert { 0% { width: 82%; } 50% { width: 70%; } 100% { width: 50%; } }
@keyframes smoothExpandFromSidebar { 0% { width: 18%; } 50% { width: 30%; } 100% { width: 50%; } }
@keyframes smoothTransition { 0% { opacity: 1; transform: translateY(0) scale(1); } 50% { opacity: 0.7; transform: translateY(-10px) scale(0.98); } 100% { opacity: 1; transform: translateY(0) scale(1); } }
@keyframes fadeInForm { 0% { opacity: 0; } 100% { opacity: 1; } }
@keyframes fadeOutForm { 0% { opacity: 1; } 100% { opacity: 0; } }
@keyframes slideTransition { 0% { opacity: 1; transform: translateX(0) scale(1); } 50% { opacity: 0.3; transform: translateX(-20px) scale(0.95); } 100% { opacity: 1; transform: translateX(0) scale(1); } }
/* Parchment-like sweep overlay */
@keyframes sweepOverlay {
  0% { transform: scaleX(0); opacity: 1; }
  60% { transform: scaleX(1); opacity: 1; }
  100% { transform: scaleX(1); opacity: 0; }
}

.expanding-student { animation: smoothExpand 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; will-change: transform; }
.expanding-teacher { animation: smoothExpand 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; will-change: transform; }
.contracting-student { animation: smoothRevert 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; will-change: transform; }
.contracting-teacher { animation: smoothRevert 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; will-change: transform; }
.sidebar-student { animation: smoothContract 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; will-change: transform; }
.sidebar-teacher { animation: smoothContract 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; will-change: transform; }
.expanding-from-sidebar-student { animation: smoothExpandFromSidebar 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; will-change: transform; }
.expanding-from-sidebar-teacher { animation: smoothExpandFromSidebar 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; will-change: transform; }
.smooth-transition { animation: smoothTransition 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; will-change: transform, opacity; }
.form-container { position: relative; animation: fadeInForm 0.3s ease-out both; }
.form-container-exit { animation: fadeOutForm 0.25s ease-in both; }
.transitioning { animation: none; }

/* Disable interactions during a cross-panel transition to avoid accidental clicks */
.dynamic-card.is-transitioning { pointer-events: none; }
/* Hide form elements instantly during transition to avoid flashing above overlay */
.dynamic-card.is-transitioning .form-wrap,
.dynamic-card.is-transitioning .form-container {
  opacity: 0 !important;
  visibility: hidden !important;
}

/* Layout helpers */
.page-container { background-color: #FAF9F5; }
.main-spacing { padding-top: 120px; padding-bottom: 64px; }
.content-center { max-width: 600px; margin: 0 auto; padding: 60px 20px; text-align: center; }
.content-center-lg { max-width: 700px; margin: 0 auto; padding: 60px 20px; text-align: center; }
.content-center-xl { max-width: 800px; margin: 0 auto; padding: 60px 20px; text-align: center; }

/* Success cards */
.success-card { background-color: #FFFFFF; border-radius: 24px; padding: 48px 32px; box-shadow: 0 12px 40px rgba(41, 73, 84, 0.08); border: 2px solid transparent; }
.success-card--student { border-color: #10B981; }
.success-card--teacher { border-color: #F59E0B; }

.success-icon { width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px; font-size: 36px; }
.success-icon--student { background-color: #10B981; color: #FFFFFF; }
.success-icon--teacher { background-color: #8ED4BE; color: #FFFFFF; }

.success-title { font-size: 32px; font-weight: bold; color: #294954; margin-bottom: 16px; font-family: Inter, sans-serif; }
.success-desc { font-size: 18px; color: #6B7280; line-height: 1.6; margin-bottom: 24px; font-family: Inter, sans-serif; }
.success-desc--lg { margin-bottom: 32px; }

/* Notice / info boxes */
.redirect-box { padding: 16px; border-radius: 12px; margin-bottom: 24px; }
.redirect-box--student { background-color: #F0F9FF; }
.redirect-text { font-size: 14px; color: #1E40AF; margin: 0; font-family: Inter, sans-serif; }

.info-box { background-color: #F0F9FF; border-radius: 16px; padding: 24px; margin-bottom: 32px; text-align: left; }
.info-title { font-size: 18px; font-weight: 600; color: #1E40AF; margin-bottom: 16px; font-family: Inter, sans-serif; display: flex; align-items: center; gap: 8px; }
.info-steps { display: flex; flex-direction: column; gap: 12px; }
.info-step { display: flex; align-items: center; gap: 12px; padding: 8px 0; }
.info-badge { width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #FFFFFF; font-weight: bold; }
.info-badge--ok { background-color: #10B981; }
.info-badge--pending { background-color: #F59E0B; }
.info-text { font-size: 14px; font-family: Inter, sans-serif; }
.info-text--ok { color: #059669; }
.info-text--pending { color: #92400E; }

.teacher-note { background-color: #EBF8FF; border-radius: 12px; padding: 20px; margin-bottom: 32px; }
.teacher-note-title { font-size: 16px; font-weight: 600; color: #1E40AF; margin-bottom: 12px; font-family: Inter, sans-serif; display: flex; align-items: center; gap: 8px; }
.info-list { font-size: 14px; color: #1E40AF; line-height: 1.6; text-align: left; margin: 0; padding-left: 20px; font-family: Inter, sans-serif; }

/* Buttons */
.btn { padding: 16px 32px; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; font-family: Inter, sans-serif; transition: all 0.3s ease; }
.btn-primary { border: none; background-color: #68B2C9; color: #FFFFFF; }
.btn-outline { border: 2px solid #68B2C9; background-color: transparent; color: #68B2C9; }
.btn-success { border: none; background-color: #8ED4BE; color: #FFFFFF; }
/* Button hovers */
.btn-primary:hover { background-color: #5A9FB8; }
.btn-outline:hover { background-color: #68B2C9; color: #FFFFFF; }
.btn-success:hover { background-color: #7BC7AD; }
/* Back button (Cambiar selección) */
.btn-back { margin-top: 40px; padding: 12px 24px; border-radius: 12px; border: 2px solid #6B7280; background-color: transparent; color: #6B7280; font-size: 16px; font-weight: 600; cursor: pointer; font-family: Inter, sans-serif; transition: all 0.3s ease; }
.btn-back:hover { background-color: #6B7280; color: #FFFFFF; }
.btn-back.is-disabled, .btn-back:disabled { opacity: 0.6; cursor: not-allowed; background-color: transparent; color: #6B7280; }

/* Titles and subtitles */
.page-title { font-size: 48px; font-weight: bold; color: #294954; margin-bottom: 24px; font-family: Inter, sans-serif; }
.page-subtitle { font-size: 20px; color: #6B7280; margin-bottom: 60px; font-family: Inter, sans-serif; }

/* Rows */
.btn-row { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }

/* Dynamic selection card */
.dynamic-card { position: relative; max-width: 72%; border-radius: 24px; overflow: hidden; box-shadow: 0 20px 60px rgba(41, 73, 84, 0.15); transition: box-shadow 0.3s ease, opacity 0.3s ease; margin: 0 auto;}
.dynamic-card.is-closed { height: 400px; }
.dynamic-card.is-student { height: auto; min-height: 800px; }
.dynamic-card.is-teacher { height: auto; min-height: 1000px; }
.dynamic-card.clickable { cursor: pointer; }

/* Sweep overlay element */
.sweep-overlay { position: absolute; inset: 0; z-index: 5; transform: scaleX(0); transform-origin: left center; animation: sweepOverlay 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards; pointer-events: none; }
.sweep-student { background: linear-gradient(135deg, #68B2C9 0%, #5A9FB8 100%); transform-origin: left center; }
.sweep-teacher { background: linear-gradient(135deg, #8ED4BE 0%, #7BC4A8 100%); transform-origin: right center; }

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .expanding-student,
  .expanding-teacher,
  .contracting-student,
  .contracting-teacher,
  .sidebar-student,
  .sidebar-teacher,
  .expanding-from-sidebar-student,
  .expanding-from-sidebar-teacher,
  .form-container,
  .form-container-exit,
  .transitioning,
  .sweep-overlay {
    animation: none !important;
    transition: none !important;
  }
}

.bg-highlight { position: absolute; left: 0; top: 0; width: 100%; height: 100%; background: #FFFFFF; border-radius: 24px; }
.bg-highlight--student { box-shadow: inset 0 0 0 3px #68B2C9; }
.bg-highlight--teacher { box-shadow: inset 0 0 0 3px #8ED4BE; }

.panel { position: absolute; top: 0; height: 100%; display: flex; flex-direction: column; align-items: center; transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s ease; box-sizing: border-box; }
.panel-student { left: 0; }
.panel-teacher { right: 0; }

/* Initial state (no userType selected) */
.panel.is-initial { width: 50%; justify-content: center; border-radius: 24px; }
.panel-student.is-initial { background: linear-gradient(135deg, #68B2C9 0%, #5A9FB8 100%); }
.panel-teacher.is-initial { background: linear-gradient(135deg, #8ED4BE 0%, #7BC4A8 100%); }
.panel-student.is-initial, .panel-student.is-sidebar { color: #FFFFFF; }
.panel-teacher.is-initial, .panel-teacher.is-sidebar { color: #FFFFFF; }

/* Sidebar state (the non-selected panel when other side expanded) */
.panel.is-sidebar { width: 18%; justify-content: center; border-radius: 24px; z-index: 1; cursor: pointer; }
.panel-student.is-sidebar { background: linear-gradient(135deg, #68B2C9 0%, #5A9FB8 100%); }
.panel-teacher.is-sidebar { background: linear-gradient(135deg, #8ED4BE 0%, #7BC4A8 100%); }

/* Expanded state (the selected panel) */
.panel.is-expanded {
  width: 82%;      /* antes 82% */
  /* margin: 0 auto; */
  background: #FFFFFF;
  display: flex;
  justify-content: flex-start;
  padding: 20px;
  border-radius: 24px;
}

.panel-student.is-expanded { border-radius: 24px 0 0 24px; box-shadow: inset 0 0 0 2px #68B2C9; color: #294954; }
.panel-teacher.is-expanded { border-radius: 0 24px 24px 0; box-shadow: inset 0 0 0 2px #8ED4BE; color: #294954; }

/* Hover effects on compact states */
.panel.is-sidebar:hover { transform: scale(1.05); }
.panel.is-initial:hover { transform: scale(1.02); }

/* Form wrapper inside expanded panels */
.form-wrap { width: 100%; max-width: 580px; padding: 0 30px 20px 30px; margin: 0 auto; box-sizing: border-box; }

/* Teacher form container - NO scroll by default (desktop) */
.teacher-form-container {
  width: 100%;
  max-width: 580px;
  padding: 0 30px 20px 30px;
  margin: 0 auto;
  /* No scroll on desktop */
  overflow-y: visible;
  overflow-x: hidden;
  max-height: none; /* Sin límite de altura en desktop */
}

/* Prevent emoji breaking in vertical sidebar */
.panel > div:first-of-type {
  writing-mode: horizontal-tb !important;
  text-orientation: upright !important;
  display: inline-block;
}

/* Close buttons inside forms */
.close-btn { position: absolute; top: 16px; width: 36px; height: 36px; border-radius: 9999px; border: 2px solid rgba(41,73,84,0.25); background: rgba(255,255,255,0.9); color: #294954; display: inline-flex; align-items: center; justify-content: center; font-size: 22px; line-height: 1; cursor: pointer; z-index: 6; box-shadow: 0 6px 16px rgba(41,73,84,0.15); transition: transform 0.2s ease, background-color 0.2s ease; }
.close-btn:hover { transform: scale(1.05); background-color: #FFFFFF; }
.close-btn.is-disabled, .close-btn:disabled { opacity: 0.6; cursor: not-allowed; }
.close-student { left: 16px; }
.close-teacher { right: 16px; }

/* ============================================
   RESPONSIVE DESIGN - MOBILE OPTIMIZATIONS
   ============================================ */

/* Mobile devices - Show both badges at top */
@media (max-width: 768px) {
  /* Improve initial selection view on mobile */
  .dynamic-card.is-closed {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    min-height: 400px;
    gap: 20px;
  }
  
  /* Container for both panels */
  .dynamic-card {
    display: flex;
    flex-direction: column;
    padding-top: 68px; /* Space for badges */
    position: relative;
    overflow: visible; /* Allow badges to be visible */
    /* Override global max-width for mobile: use nearly full width */
    width: calc(100% - 32px);
    max-width: none;
    margin: 0 16px;
  }
  
  /* Initial selection panels - Large buttons on mobile */
  .panel.is-initial {
    position: relative !important;
    width: calc(100% - 32px) !important;
    max-width: 280px !important;
    height: auto !important;
    padding: 20px 24px !important;
    border-radius: 24px !important;
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 12px !important;
    writing-mode: horizontal-tb !important;
    text-orientation: unset !important;
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 1;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
    margin: 0 auto;
    top: auto !important;
    left: auto !important;
    right: auto !important;
  }
  
  .panel.is-initial:active {
    transform: scale(0.97);
  }
  
  /* Badges when form is open */
  .panel.is-sidebar {
    position: absolute !important;
    top: 16px !important;
    width: auto !important;
    height: auto !important;
    padding: 10px 18px !important;
    border-radius: 20px !important;
    display: inline-flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 6px !important;
    writing-mode: horizontal-tb !important;
    text-orientation: unset !important;
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 11;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    max-width: calc(50% - 20px);
  }
  
  /* Position badges side by side when form is open */
  .panel-student.is-sidebar {
    left: 16px !important;
  }
  
  .panel-teacher.is-sidebar {
    right: 16px !important;
  }
  
  /* Active badge style */
  .panel.is-sidebar {
    opacity: 0.7;
    transform: scale(0.9);
  }
  
  .panel.is-sidebar:active {
    transform: scale(0.85);
  }
  
  /* Adjust content on mobile */
  .panel.is-sidebar > div,
  .panel.is-sidebar > h2,
  .panel.is-initial > div,
  .panel.is-initial > h2 {
    writing-mode: horizontal-tb !important;
    text-orientation: unset !important;
    margin: 0 !important;
  }
  
  /* Prevent emoji breaking in vertical mode */
  .panel > div {
    writing-mode: horizontal-tb !important;
    text-orientation: upright !important;
  }
  
  /* Icon size for initial selection buttons */
  .panel.is-initial > div {
    font-size: 32px !important;
    margin-bottom: 0 !important;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.15));
  }
  
  /* Text size for initial selection buttons */
  .panel.is-initial > h2 {
    font-size: 18px !important;
    font-weight: 700 !important;
    letter-spacing: 0.5px;
    white-space: nowrap;
  }
  
  /* Icon size in small badges */
  .panel.is-sidebar > div {
    font-size: 18px !important;
    margin-bottom: 0 !important;
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
  }
  
  /* Text size in small badges */
  .panel.is-sidebar > h2 {
    font-size: 11px !important;
    font-weight: 700 !important;
    letter-spacing: 0.3px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  /* Hide description paragraph in badges */
  .panel.is-sidebar > p,
  .panel.is-initial > p {
    display: none !important;
  }
  
  /* Expand active panel to full width */
  .panel.is-expanded {
    width: 100% !important;
    border-radius: 24px !important;
    position: relative !important;
    padding-top: 68px !important;
  }
 
  /* Adjust dynamic card height */
  .dynamic-card.is-student,
  .dynamic-card.is-teacher {
    min-height: auto;
  }
  
  /* Disable hover effects on mobile (touch devices don't need them) */
  .panel.is-sidebar:hover,
  .panel.is-initial:hover {
    transform: none;
  }
  
  .close-btn:hover {
    transform: none;
  }
  
  /* Reduce padding on mobile for better space usage */
  .main-spacing {
    padding-top: 100px;
    padding-bottom: 40px;
  }
  
  .content-center,
  .content-center-lg,
  .content-center-xl {
    padding: 40px 16px;
  }
  
  .form-wrap {
    padding: 0 20px 20px 20px;
  }
}

/* Small mobile devices */
@media (max-width: 480px) {
  .page-title {
    font-size: 28px;
  }
  
  .page-subtitle {
    font-size: 14px;
    margin-bottom: 40px;
  }
  
  .form-wrap {
    padding: 0 16px 16px 16px;
  }
  
  .teacher-form-container {
    padding: 0 16px 16px 16px;
  }
  
  /* Adjust close button position on mobile to avoid badges */
  .close-btn {
    width: 32px;
    height: 32px;
    font-size: 20px;
    top: 74px; /* Below badges */
  }
  
  .close-student {
    left: 16px;
  }
  
  .close-teacher {
    right: 16px;
  }
}

/* Responsive adjustments for teacher form - SCROLL ONLY ON MOBILE/TABLET */
@media (max-width: 900px) {
  .teacher-form-container {
    /* Activar scroll solo en tablets y móviles */
    overflow-y: auto !important;
    max-height: calc(125vh - 150px) !important;
    /* Smooth scrolling */
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    /* Thin scrollbar */
    scrollbar-width: thin;
    scrollbar-color: rgba(104, 178, 201, 0.3) transparent;
  }
  
  /* Custom scrollbar for Chrome, Safari and Opera */
  .teacher-form-container::-webkit-scrollbar {
    width: 6px;
  }
  
  .teacher-form-container::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .teacher-form-container::-webkit-scrollbar-thumb {
    background-color: rgba(104, 178, 201, 0.3);
    border-radius: 10px;
    transition: background-color 0.2s ease;
  }
  
  .teacher-form-container::-webkit-scrollbar-thumb:hover {
    background-color: rgba(104, 178, 201, 0.5);
  }
}

@media (max-width: 768px) {
  .teacher-form-container {
    padding: 0 20px 20px 20px;
    max-height: calc(100vh - 180px);
  }
}

@media (max-width: 480px) {
  .teacher-form-container {
    padding: 0 16px 16px 16px;
    max-height: calc(100vh - 160px);
  }
}
