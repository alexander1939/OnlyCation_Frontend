.blm-overlay{position:fixed;inset:0;background:rgba(17,24,39,.45);backdrop-filter:blur(2px);display:flex;align-items:center;justify-content:center;z-index:9999}
.blm-container{width:min(960px,92vw);max-height:88vh;overflow:auto;background:#FAF9F5;border-radius:16px;box-shadow:0 24px 60px rgba(0,0,0,.25);border:1px solid #e5e7eb;position:relative}
.blm-container:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#8ED4BE,#68B2C9)}
.blm-overlay{animation:blm-fade-in .22s ease-out}
.blm-container{animation:blm-pop .28s cubic-bezier(.2,.8,.2,1)}
.blm-header{display:flex;align-items:flex-start;justify-content:space-between;padding:20px 24px;border-bottom:1px solid #eef2f7}
.blm-title{font-size:20px;line-height:1.3;color:#294954;margin:0}
.blm-subtitle{margin-top:6px;color:#5b6b73;display:flex;gap:8px;flex-wrap:wrap;font-size:14px}
.blm-close{border:none;background:transparent;font-size:24px;color:#6b7280;cursor:pointer;line-height:1;padding:0 6px;border-radius:8px;transition:transform .15s ease,background .15s ease,color .15s ease}
.blm-close:hover{color:#111827;background:#eef2f7;transform:scale(1.06)}

.blm-body{display:grid;grid-template-columns:1fr 1fr;gap:24px;padding:20px 24px}
@media (max-width: 920px){.blm-body{grid-template-columns:1fr}}

.blm-calendar{background:#fff;border:1px solid #eef2f7;border-radius:12px;padding:16px}
.blm-cal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.blm-month{font-weight:600;color:#294954}
.blm-nav{border:none;background:#f3f4f6;color:#294954;border-radius:10px;padding:6px 10px;cursor:pointer;transition:background .15s ease,transform .15s ease}
.blm-nav:hover{background:#e5e7eb}
.blm-weekdays{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin-bottom:6px}
.blm-wd{font-size:12px;color:#6b7280;text-align:center}
.blm-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
.blm-day{height:42px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;color:#294954;font-weight:600;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:border-color .15s ease,box-shadow .15s ease,transform .05s ease}
.blm-day.is-out{color:#9ca3af}
.blm-day.is-disabled{opacity:.5;cursor:not-allowed;background:#f9fafb}
.blm-day.is-available{border-color:#8ED4BE}
.blm-day.has-selection{background:#e0f7ef;border-color:#8ED4BE}
.blm-day.is-today{border-color:#68B2C9;box-shadow:0 0 0 2px rgba(104,178,201,.35)}
.blm-day.is-past{opacity:.35;cursor:not-allowed;background:#f3f4f6}
.blm-day.is-selected{background:#8ED4BE;color:#083039;border-color:#68B2C9;box-shadow:0 0 0 3px rgba(142,212,190,.25)}
.blm-day:not(.is-disabled):hover{border-color:#68B2C9;box-shadow:0 2px 10px rgba(0,0,0,.06)}

.blm-slots{background:#fff;border:1px solid #eef2f7;border-radius:12px;padding:16px}
.blm-slots-title{font-weight:600;color:#294954;margin-bottom:10px}
.blm-help-text{font-size:12px;color:#6b7280;margin:-4px 0 10px}
.blm-slot-group-title{font-size:13px;color:#5b6b73;margin-bottom:8px}
.blm-slot-list{display:flex;flex-wrap:wrap;gap:8px}
.blm-slot-empty{font-size:13px;color:#9ca3af}
.blm-hour{min-width:92px;height:40px;padding:0 12px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;color:#294954;cursor:pointer;transition:all .15s ease;font-weight:600}
.blm-hour:hover{border-color:#68B2C9;transform:translateY(-1px)}
.blm-hour:focus{outline:none;box-shadow:0 0 0 3px rgba(104,178,201,.25)}
.blm-hour.is-selected{background:#8ED4BE;color:#083039;border-color:#68B2C9;box-shadow:0 6px 18px rgba(142,212,190,.35)}

.blm-summary{background:#fff;border-top:1px solid #eef2f7;padding:16px 24px}
.blm-summary-title{font-weight:600;color:#294954;margin-bottom:10px}
.blm-summary-row{display:flex;align-items:center;justify-content:space-between;padding:6px 0;border-bottom:1px dashed #eef2f7}
.blm-summary-row:last-child{border-bottom:none}
.blm-summary-label{color:#5b6b73;font-size:14px}
.blm-summary-value{color:#294954;font-size:14px}
.blm-summary-total{margin-top:12px;display:flex;align-items:center;justify-content:space-between;background:#f8faf9;border:1px solid #e7f4ef;border-radius:10px;padding:10px 12px;color:#294954}
.blm-summary-total strong{background:#FFDE97;color:#083039;border-radius:8px;padding:6px 10px;min-width:96px;text-align:center;display:inline-flex;align-items:center;gap:6px}

.blm-spinner-inline{display:inline-block;width:14px;height:14px;border:2px solid #FDBA74;border-top-color:#F97316;border-radius:9999px;animation:blm-spin .8s linear infinite;vertical-align:middle}

.blm-policy-badge{display:inline-flex;align-items:center;gap:6px;background:#FFF4E6;color:#7C2D12;border:1px solid #FDBA74;border-left:4px solid #F97316;padding:6px 10px;border-radius:10px;font-weight:700}

.blm-footer{padding:16px 24px;border-top:1px solid #eef2f7}
.blm-primary{width:100%;height:48px;border-radius:12px;border:1px solid transparent;background:linear-gradient(90deg,#8ED4BE,#68B2C9);color:#083039;font-weight:800;cursor:pointer;letter-spacing:.2px;transition:filter .15s ease,transform .08s ease}
.blm-primary:hover{filter:brightness(1.03)}
.blm-primary:active{transform:translateY(1px)}
.blm-primary:disabled{opacity:.6;cursor:not-allowed}

@media (max-width: 768px) {
  /* Place modal a bit lower on small screens so the X is visible */
  .blm-overlay { align-items: flex-start; padding-top: calc(56px + env(safe-area-inset-top, 0px)); }
  .blm-container { max-height: 82vh; }
}

@keyframes blm-fade-in{from{opacity:0}to{opacity:1}}
@keyframes blm-pop{from{opacity:0;transform:translateY(6px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}
@keyframes blm-spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
